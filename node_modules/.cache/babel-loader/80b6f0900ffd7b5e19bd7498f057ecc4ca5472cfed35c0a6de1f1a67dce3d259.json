{"ast":null,"code":"var _jsxFileName = \"/Users/datnq2001/Documents/Trendall-website/src/Components/AdvancedSearch/ProvenienceSearchBar.js\",\n  _s = $RefreshSig$();\nimport React, { useState, useRef, useEffect } from \"react\";\nimport { useNavigate } from 'react-router-dom';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nfunction ProvenienceSearchBar({\n  searchData,\n  type,\n  vaseData,\n  onSelect,\n  onSearchAndClose\n}) {\n  _s();\n  const [searchInput, setSearchInput] = useState(\"\");\n  const [showSuggestions, setShowSuggestions] = useState(true); // Ban đầu hiển thị phần gợi ý\n  const [matchedItems, setMatchedItems] = useState([]);\n  const searchWrapperRef = useRef(null);\n  const navigate = useNavigate();\n  useEffect(() => {\n    function handleClickOutside(event) {\n      if (searchWrapperRef.current && !searchWrapperRef.current.contains(event.target)) {\n        setShowSuggestions(false);\n      }\n    }\n    document.addEventListener(\"click\", handleClickOutside);\n    return () => {\n      document.removeEventListener(\"click\", handleClickOutside);\n    };\n  }, [searchWrapperRef]);\n  useEffect(() => {\n    // Hiển thị phần gợi ý khi có sự thay đổi trong searchData hoặc vaseData\n    showAllData();\n  }, [searchData, vaseData]);\n  const handleInputChange = e => {\n    const inputVal = e.target.value;\n    setSearchInput(inputVal);\n    if (inputVal.trim() === \"\") {\n      setMatchedItems([]);\n      setShowSuggestions(true); // Hiển thị phần gợi ý khi input rỗng\n      return;\n    }\n    const matches = searchData.filter(item => typeof item === 'string' && item.toLowerCase().startsWith(inputVal.toLowerCase())).map(option => {\n      const count = vaseData.filter(vase => vase[\"Provenience\"] === option).length;\n      return {\n        name: option,\n        count\n      };\n    });\n    setMatchedItems(matches);\n    setShowSuggestions(true);\n  };\n  const handleSelectName = name => {\n    setSearchInput(name);\n    setMatchedItems([]);\n    setShowSuggestions(false);\n    onSelect(name); // Gọi hàm onSelect và truyền giá trị gợi ý vào\n  };\n  const handleSearch = () => {\n    // navigate(`/search?q=${encodeURIComponent(searchInput)}`);\n  };\n  const showAllData = () => {\n    const matches = searchData.map(option => {\n      const count = vaseData.filter(vase => vase[\"Provenience\"] === option).length;\n      return {\n        name: option,\n        count\n      };\n    });\n\n    // Sắp xếp các mục theo thứ tự alphabet\n    const filteredMatches = matches.filter(item => item.count > 0);\n\n    // Sắp xếp các mục theo thứ tự alphabet\n    filteredMatches.sort((a, b) => a.name.localeCompare(b.name));\n    setMatchedItems(filteredMatches);\n  };\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"search-bar-wrapper search-bar-wrapper--advanced\",\n    ref: searchWrapperRef,\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"header__search header__search--advanced\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"header__search-input-wrap header__search-input-wrap--advanced\",\n        children: /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          className: \"header__search-input header__search-input--advanced\",\n          placeholder: `Search ${type} ...`,\n          value: searchInput,\n          onChange: handleInputChange\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 80,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 79,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n        className: \"header__search-btn header__search-btn--advanced\",\n        onClick: () => {\n          handleSearch();\n          onSearchAndClose();\n        },\n        children: /*#__PURE__*/_jsxDEV(\"i\", {\n          className: \"header__search-btn-icon fas fa-search\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 90,\n          columnNumber: 21\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 89,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 78,\n      columnNumber: 13\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"header__search-history header__search-history--advanced\",\n      children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n        className: \"header__search-history-heading\",\n        children: \"Search suggestion\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 94,\n        columnNumber: 17\n      }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n        className: \"header__search-history-list list\",\n        children: matchedItems.map(({\n          name,\n          count\n        }) => /*#__PURE__*/_jsxDEV(\"li\", {\n          className: \"header__search-history-item  header__search-history-item--advanced list-items\",\n          style: {\n            cursor: \"pointer\"\n          },\n          onClick: () => handleSelectName(name),\n          children: /*#__PURE__*/_jsxDEV(\"span\", {\n            children: [/*#__PURE__*/_jsxDEV(\"b\", {\n              children: name\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 104,\n              columnNumber: 33\n            }, this), \" (\", count, \" vases)\"]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 103,\n            columnNumber: 29\n          }, this)\n        }, name, false, {\n          fileName: _jsxFileName,\n          lineNumber: 97,\n          columnNumber: 25\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 95,\n        columnNumber: 17\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 93,\n      columnNumber: 13\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 77,\n    columnNumber: 9\n  }, this);\n}\n_s(ProvenienceSearchBar, \"KHGG0+3IQUoye/spSNbqwDEjPUM=\", false, function () {\n  return [useNavigate];\n});\n_c = ProvenienceSearchBar;\nexport default ProvenienceSearchBar;\nvar _c;\n$RefreshReg$(_c, \"ProvenienceSearchBar\");","map":{"version":3,"names":["React","useState","useRef","useEffect","useNavigate","jsxDEV","_jsxDEV","ProvenienceSearchBar","searchData","type","vaseData","onSelect","onSearchAndClose","_s","searchInput","setSearchInput","showSuggestions","setShowSuggestions","matchedItems","setMatchedItems","searchWrapperRef","navigate","handleClickOutside","event","current","contains","target","document","addEventListener","removeEventListener","showAllData","handleInputChange","e","inputVal","value","trim","matches","filter","item","toLowerCase","startsWith","map","option","count","vase","length","name","handleSelectName","handleSearch","filteredMatches","sort","a","b","localeCompare","className","ref","children","placeholder","onChange","fileName","_jsxFileName","lineNumber","columnNumber","onClick","style","cursor","_c","$RefreshReg$"],"sources":["/Users/datnq2001/Documents/Trendall-website/src/Components/AdvancedSearch/ProvenienceSearchBar.js"],"sourcesContent":["import React, { useState, useRef, useEffect } from \"react\";\nimport { useNavigate } from 'react-router-dom';\n\nfunction ProvenienceSearchBar({ searchData, type, vaseData, onSelect, onSearchAndClose }) {\n    const [searchInput, setSearchInput] = useState(\"\");\n    const [showSuggestions, setShowSuggestions] = useState(true); // Ban đầu hiển thị phần gợi ý\n    const [matchedItems, setMatchedItems] = useState([]);\n    const searchWrapperRef = useRef(null);\n    const navigate = useNavigate();\n\n    useEffect(() => {\n        function handleClickOutside(event) {\n            if (searchWrapperRef.current && !searchWrapperRef.current.contains(event.target)) {\n                setShowSuggestions(false);\n            }\n        }\n\n        document.addEventListener(\"click\", handleClickOutside);\n        return () => {\n            document.removeEventListener(\"click\", handleClickOutside);\n        };\n    }, [searchWrapperRef]);\n\n    useEffect(() => {\n        // Hiển thị phần gợi ý khi có sự thay đổi trong searchData hoặc vaseData\n        showAllData();\n    }, [searchData, vaseData]);\n\n    const handleInputChange = (e) => {\n        const inputVal = e.target.value;\n        setSearchInput(inputVal);\n\n        if (inputVal.trim() === \"\") {\n            setMatchedItems([]);\n            setShowSuggestions(true); // Hiển thị phần gợi ý khi input rỗng\n            return;\n        }\n\n        const matches = searchData\n            .filter(item => typeof item === 'string' && item.toLowerCase().startsWith(inputVal.toLowerCase()))\n            .map(option => {\n                const count = vaseData.filter(vase => vase[\"Provenience\"] === option ).length;\n                return { name: option, count };\n            });\n\n        setMatchedItems(matches);\n        setShowSuggestions(true);\n    };\n\n    const handleSelectName = (name) => {\n        setSearchInput(name);\n        setMatchedItems([]);\n        setShowSuggestions(false);\n        onSelect(name); // Gọi hàm onSelect và truyền giá trị gợi ý vào\n    };\n\n    const handleSearch = () => {\n        // navigate(`/search?q=${encodeURIComponent(searchInput)}`);\n    };\n    \n    const showAllData = () => {\n        const matches = searchData.map(option => {\n            const count = vaseData.filter(vase => vase[\"Provenience\"] === option ).length;\n            return { name: option, count };\n        });\n    \n        // Sắp xếp các mục theo thứ tự alphabet\n        const filteredMatches = matches.filter(item => item.count > 0);\n\n        // Sắp xếp các mục theo thứ tự alphabet\n        filteredMatches.sort((a, b) => a.name.localeCompare(b.name));\n\n        setMatchedItems(filteredMatches);\n    };\n\n    return (\n        <div className=\"search-bar-wrapper search-bar-wrapper--advanced\" ref={searchWrapperRef}>\n            <div className=\"header__search header__search--advanced\">\n                <div className=\"header__search-input-wrap header__search-input-wrap--advanced\">\n                    <input\n                        type=\"text\"\n                        className=\"header__search-input header__search-input--advanced\"\n                        placeholder={`Search ${type} ...`}\n                        value={searchInput}\n                        onChange={handleInputChange}\n                    />\n                    \n                </div>\n                <button className=\"header__search-btn header__search-btn--advanced\" onClick={() => { handleSearch(); onSearchAndClose(); }}>\n                    <i className=\"header__search-btn-icon fas fa-search\"></i>\n                </button>\n            </div>\n            <div className=\"header__search-history header__search-history--advanced\">\n                <h3 className=\"header__search-history-heading\">Search suggestion</h3>\n                <ul className=\"header__search-history-list list\">\n                    {matchedItems.map(({ name, count }) => (\n                        <li\n                            key={name}\n                            className=\"header__search-history-item  header__search-history-item--advanced list-items\"\n                            style={{ cursor: \"pointer\" }}\n                            onClick={() => handleSelectName(name)}\n                        >\n                            <span>\n                                <b>{name}</b> ({count} vases)\n                            </span>\n                        </li>\n                    ))}\n                </ul>\n            </div>\n        </div>\n    );\n}\n\nexport default ProvenienceSearchBar;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}